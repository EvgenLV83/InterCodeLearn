<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Запомните синтаксис C#</title>
    <link rel="stylesheet" href="/css/Color_Scheme.css" />
</head>

<body>

    <header>
        <div class="logo">InterCodeLearn</div>
        <nav>
            <a href="/client/index.html">Главная</a>
            <a href="#">Курсы</a>
            <a href="#">Практика</a>
            <a href="#">Войти</a>
        </nav>
    </header>

    <main style="padding: 20px; max-width: 1800px; margin: auto;">
        <h1>Запомните синтаксис C#</h1>
        <section class="courses">
            
        <div class="cards">
            <!-- <div class="card"> -->
        <div id="loading">Загрузка данных...</div>
        <div id="description"></div> 
        <div id="code"></div>
        <!-- </div> -->

        <!-- <div class="card"> -->
        
        <div id="explanationContent"></div>
         <!-- </div> -->
        </div>
   
    </section>

        <div id="inputArea" style="margin-top: 30px;">
            <label for="userInput">public void Main() {</label><br />
            <textarea id="userInput" rows="10" cols="50"></textarea>}<br />
            <div id="codeExplanation" style="margin-top: 20px; display:none;">
            </div>
            <div style="margin-top: 20px;">
                <button id="checkButton" class="btn btn-primary">Проверить</button>
                <button id="repeatButton" class="btn btn-secondary">Повторить</button>
                <button id="nextButton" class="btn btn-secondary" disabled>Следующий</button>
            </div>
        </div>

        <div id="result" style="margin-top: 20px; font-size: 18px;"></div>

        <div id="comparison" style="margin-top: 30px; display:none;">
            <div>Сравнение кода:</div>
            <div class="code-comparison" style="display:flex; gap:20px;">
                <div class="code-column user-code" style="flex:1;">
                    <div class="code-title">Ваш код:</div>
                    <pre id="userCodeDisplay" style="background:#222; padding:10px; border-radius:5px;"></pre>
                </div>
                <div class="code-column correct-code" style="flex:1;">
                    <div class="code-title">Правильный код:</div>
                    <pre id="correctCodeDisplay" style="background:#222; padding:10px; border-radius:5px;"></pre>
                </div>
            </div>
        </div>

        <button id="tryButton" class="btn btn-secondary" disabled style="margin-top: 20px;">Показать код</button>
    </main>

    <footer>
        &copy; 2025 CodeLearn. Все права защищены. | <a href="#" style="color:#00ffcc; text-decoration:none;">Контакты</a>
    </footer>

  <script>
//     async function createApp() {
//       // Локальные переменные — не глобальные
//       let examples = [];
//       let templates = [];
//       let currentExampleIndex = 0;
//       let codeVisible = false;

//       // Кэшируем элементы DOM
//       const loadingEl = document.getElementById('loading');
//       const tryButton = document.getElementById('tryButton');
//       const codeEl = document.getElementById('code');
//       const descriptionEl = document.getElementById('description');
//       const userInputEl = document.getElementById('userInput');
//       const resultEl = document.getElementById('result');
//       const comparisonEl = document.getElementById('comparison');
//       const userCodeDisplayEl = document.getElementById('userCodeDisplay');
//       const correctCodeDisplayEl = document.getElementById('correctCodeDisplay');
//       const checkButton = document.getElementById('checkButton');
//       const repeatButton = document.getElementById('repeatButton');
//       const nextButton = document.getElementById('nextButton');
//       const codeExplanationEl = document.getElementById('codeExplanation');
//       const explanationContentEl = document.getElementById('explanationContent');

//       // Переменные для объяснения кода
//       let lastTypedWord = '';
//       let explanationTimeout;

//       // Обработчик ввода для объяснения кода
//       userInputEl.addEventListener('input', async (e) => {
//         clearTimeout(explanationTimeout);

//         // Получаем текущее слово (последнее введенное)
//         const text = userInputEl.value;
//         const words = text.split(/\s+/);
//         const currentWord = words[words.length - 1].trim();

//         // Если слово изменилось и не пустое
//         if (currentWord && currentWord !== lastTypedWord) {
//           lastTypedWord = currentWord;

//           explanationTimeout = setTimeout(async () => {
//             try {
//               const response = await fetch(`/api/keyword/${currentWord}`);
//               if (response.ok) {
//                 const data = await response.json();

//                 // Показываем объяснение
//                 explanationContentEl.innerHTML = `
//                 <p><strong>${currentWord}:</strong> ${data.description}</p>
//                 ${data.example ? `<p><em>Пример:</em> <code>${data.example}</code></p>` : ''}
//               `;
//                 codeExplanationEl.style.display = 'block';
//               } else {
//                 codeExplanationEl.style.display = 'none';
//               }
//             } catch (error) {
//               console.error('Error fetching keyword info:', error);
//               codeExplanationEl.style.display = 'none';
//             }
//           }, 800); // Задержка 800мс после окончания ввода
//         }
//       });

//       // Скрываем объяснение при очистке поля
//       userInputEl.addEventListener('keydown', (e) => {
//         if (e.key === 'Backspace' && userInputEl.value.trim() === '') {
//           codeExplanationEl.style.display = 'none';
//         }
//       });

//       async function loadData() {
//         loadingEl.style.display = 'block';
//         tryButton.disabled = true;
//         try {
//           const examplesResponse = await fetch('/api/examples');
//           if (!examplesResponse.ok) throw new Error('Ошибка загрузки примеров');
//           examples = await examplesResponse.json();

//           const templatesResponse = await fetch('/api/templates');
//           if (!templatesResponse.ok) throw new Error('Ошибка загрузки шаблонов');
//           templates = await templatesResponse.json();

//           tryButton.disabled = false;
//           loadExample(0);
//         } catch (error) {
//           resultEl.innerText = `Ошибка: ${error.message}`;
//           console.error(error);
//         } finally {
//           loadingEl.style.display = 'none';
//         }
//       }

//       function loadExample(index) {
//         if (index !== null && index < examples.length) {
//           currentExampleIndex = index;
//           codeEl.innerText = examples[index].code;
//           descriptionEl.innerText = examples[index].description;
//           userInputEl.value = '';
//           resultEl.innerText = '';
//           codeEl.style.display = 'none';
//           comparisonEl.style.display = 'none';
//           codeExplanationEl.style.display = 'none';
//           codeVisible = false;
//           nextButton.disabled = true;
//           tryButton.innerText = "Показать код";
//           checkButton.disabled = false;
//         } else {
//           resultEl.innerText = "Поздравляем! Вы прошли все примеры!";
//         }
//       }

//       tryButton.addEventListener('click', () => {
//         if (!codeVisible) {
//           codeEl.style.display = 'block';
//           codeVisible = true;
//           tryButton.innerText = "Скрыть код";
//           checkButton.disabled = true;
//         } else {
//           loadExample(currentExampleIndex);
//         }
//       });

//       nextButton.addEventListener('click', () => {
//         if (examples[currentExampleIndex].next !== null) {
//           loadExample(examples[currentExampleIndex].next);
//         }
//       });

//       checkButton.addEventListener('click', () => {
//         const userInput = userInputEl.value.trim().replace(/\s+/g, ' ');

//         // Аналогичный разбор и сравнение кода
//         const inputText = userInput.replace(/([(){}])/g, ' \$1 ');
//         const keywords = ['void', 'int', 'return', 'string', 'bool', 'int\\[\\]', '='];
//         const regex = new RegExp('(?:' + keywords.join('|') + ')\\s+([^;.!\\s]+)', 'g');









//         // const quotedRegex = /"(.*?)"/g;
       
//         // const matches = [];
//         // let match;

//         // while ((match = quotedRegex.exec(inputText)) !== null) {
//         //   matches.push(match[1]);
//         // }

// //function parseTemplate(inputText) {
//   // 1. Сначала извлекаем все значения в фигурных скобках
//   const braceValues = [];
//   const braceRegex = /\{(\d+)\}/g;
//   let match;
  
//   while ((match = braceRegex.exec(inputText)) !== null) {
//     braceValues.push(match[1]);
//   }

//   // 2. Разбираем строки в кавычках с учетом шаблона
//   const quotedParts = [];
//   const quotedRegex = /"(.*?)"/g;
  
//   while ((match = quotedRegex.exec(inputText)) !== null) {
//     const content = match[1];
//     quotedParts.push(content);
//   }


// const quotedParts1 = [];
//   const quotedRegex1 = /\$\s*"([^{"{]*)/g;
  
//   while ((match = quotedRegex1.exec(inputText)) !== null) {
//     const content = match[1];
//     quotedParts1.push(content);
//   }





//   // 3. Собираем результаты в нужном порядке
//   const matches = [];
  
// if (quotedParts1.length > 0) {
//     matches.push(...quotedParts1);
//   }



//   // Первое значение - строка в кавычках {0}
//   if (quotedParts.length > 0) {
//     matches.push(quotedParts[0]);
//   }
  
//   // Добавляем оставшиеся значения из фигурных скобок
//   for (let i = 1; i < braceValues.length; i++) {
//   matches.push(braceValues[i]);
// }


//         while ((match = regex.exec(inputText)) !== null) {
//           const word = match[1].replace(/[^\wа-яА-ЯёЁ]/g, '').trim();
//           if (word) matches.push(word);
//         }

//         const N = matches.map(word => word);

//         let correctTemplate = templates[currentExampleIndex].codeP;
//         let correctCode = correctTemplate;
//         for (let i = 0; i < N.length; i++) {
//           correctCode = correctCode.replace(new RegExp(`\\{${i}\\}`, 'g'), N[i]);
//         }

//         const normalizedUserInput = userInput.replace(/\s+/g, ' ').trim();
//         const normalizedCorrectCode = correctCode.replace(/\s+/g, ' ').trim();

//         if (normalizedUserInput === normalizedCorrectCode) {
//           // Правильный код — выводим результат
//           function addNumbers(a, b, c, d) {
//             if (examples[currentExampleIndex].next === 1) return c;
//             if (examples[currentExampleIndex].next === 2) return Number(a) + Number(b);
//             if (examples[currentExampleIndex].next === 3) {
//               let n = parseInt(N[2]);
//               let result = [];
//               for (let i = 1; i <= n; i++) {
//                 result.push(i);
//               }
//               return result.join(' ');
//             }
//             if (examples[currentExampleIndex].next === 4) {

//               const original = N[2];
//               const upper = original.toUpperCase();
//               const lower = original.toLowerCase();
//               return  "\n" + upper + "\n" +lower;
//             }
//             return 0;
//           }

//           const result2 = addNumbers(N[2], N[4], N[0], N[1], N[3]);
//           resultEl.innerText = `✅ Правильно! Результат: ${result2}. \n Нажмите 'Следующий'.`;
//           nextButton.disabled = false;
//           comparisonEl.style.display = 'none';
//         } else {
//           // Неправильный код — показываем сравнение
//           resultEl.innerText = "❌ Неправильно! Смотрите сравнение ниже.";
//           comparisonEl.style.display = 'block';
//           userCodeDisplayEl.innerText = userInput;
//           correctCodeDisplayEl.innerText = correctCode;
//         }
//       });

//       repeatButton.addEventListener('click', () => {
//         loadExample(currentExampleIndex);
//         resultEl.innerText = "🔄 Пример перезагружен. Попробуйте еще раз!";
//       });

//       // Запускаем загрузку данных
//       await loadData();
//     }

//     // Запуск приложения
//     createApp();
  </script>
  <!-- Подключаем JS-файлы -->
 <!-- <script src="/js/dom-elements.js"></script>
<script src="/js/event-listeners.js"></script>
<script src="/js/code-parser.js"></script>
<script src="/js/app-core.js"></script> -->
<script type="module" src="/js/main.js"></script>
<script type="module" src="/js/dom-elements.js"></script>
<script type="module" src="/js/event-listeners.js"></script>
<script type="module" src="/js/code-parser.js"></script>
<script type="module" src="/js/app-core.js"></script>



</body>
</html>